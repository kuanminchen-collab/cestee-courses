<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>課程列表</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { text-align: center; }
        .filters { display: flex; flex-wrap: wrap; justify-content: center; margin-bottom: 20px; gap: 10px; }
        .filters input, .filters select { padding: 8px; font-size: 16px; }
        .filters button { padding: 8px 16px; font-size: 16px; cursor: pointer; }
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin: auto; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; }
        a { color: blue; text-decoration: none; }
        a:hover { text-decoration: underline; }
        #no-results { text-align: center; color: red; display: none; }

        @media (max-width: 768px) {
            .filters { flex-direction: column; align-items: center; }
            th, td { padding: 8px; font-size: 14px; }
            table { min-width: 600px; }
        }
    </style>
</head>
<body>
    <h1>課程列表</h1>
    <div class="filters">
        <input type="text" id="searchInput" placeholder="搜尋課名或老師">
        <select id="categorySelect">
            <option value="">所有課程類別</option>
        </select>
        <select id="modeSelect">
            <option value="">所有開課形式</option>
            <option value="video">視訊課程</option>
            <option value="physical">實體課程</option>
        </select>
        <button id="resetBtn">重置</button>
    </div>
    <div class="table-container">
        <table id="coursesTable">
            <thead>
                <tr>
                    <th>序號</th>
                    <th>中文課名</th>
                    <th>開課時間</th>
                    <th>授課老師</th>
                    <th>課程類別</th>
                </tr>
            </thead>
            <tbody id="coursesBody"></tbody>
        </table>
    </div>
    <p id="no-results">無符合條件的課程</p>

    <script>
        const courses = [
            { serial: "001", name: "情侶牧養與婚前輔導", nameUrl: "https://tee.ces.org.tw/course/PC833", time: "※【實體課程】南京東路禮拜堂新安中心教室，週一下午2:00-4:25(9/15-12/15)12週次", teacher: "馬永年<br>梁婉華", teacherUrl: "https://tee.ces.org.tw/course/teacher/PC833", category: "輔導類" },
            { serial: "002", name: "成癮面面觀", nameUrl: "https://tee.ces.org.tw/course/PC630", time: "※【全視訊課程】週一晚上7:00-9:25(9/15-12/15)12週次", teacher: "趙慧香", teacherUrl: "https://tee.ces.org.tw/course/teacher/PC630", category: "輔導類" },
            { serial: "003", name: "工作神學與職場宣教", nameUrl: "https://tee.ces.org.tw/course/CT268", time: "※【全視訊課程】週一晚上7:00-9:25(9/15-12/15)12週次", teacher: "陳耀皇", teacherUrl: "https://tee.ces.org.tw/course/teacher/CT268", category: "神學類" },
            { serial: "004", name: "給AI時代的《箴言》", nameUrl: "https://tee.ces.org.tw/course/OT253", time: "※【全視訊課程】週一晚上7:00-9:25(9/15-12/15)12週次", teacher: "劉幸枝", teacherUrl: "https://tee.ces.org.tw/course/teacher/OT253", category: "舊約類" },
            { serial: "005", name: "一般書信導讀", nameUrl: "https://tee.ces.org.tw/course/NTa231", time: "※【同步視訊課程】景美禮拜堂教室，週一晚上7:00-9:25(9/15-12/15)12週次", teacher: "于厚恩", teacherUrl: "https://tee.ces.org.tw/course/teacher/NTa231", category: "新約類" },
            { serial: "006", name: "宣教中國議題", nameUrl: "https://tee.ces.org.tw/course/EM290a", time: "※【全視訊課程】週二晚上7:00-10:00(9/2-11/4)10週次", teacher: "李約瑟", teacherUrl: "https://tee.ces.org.tw/course/teacher/EM290a", category: "宣教類" },
            { serial: "007", name: "福音書導讀", nameUrl: "https://tee.ces.org.tw/course/NT224m", time: "※【全視訊課程】週二晚上7:00-9:35(9/16-11/25)11週次", teacher: "林智偉", teacherUrl: "https://tee.ces.org.tw/course/teacher/NT224m", category: "新約類" },
            { serial: "008", name: "靈修神學與實踐", nameUrl: "https://tee.ces.org.tw/course/CT262c", time: "※【全視訊課程】週二晚上7:00-9:35(9/16-12/2)11週次", teacher: "施永昌", teacherUrl: "https://tee.ces.org.tw/course/teacher/CT262c", category: "神學類" },
            { serial: "009", name: "基督教神學(下)", nameUrl: "https://tee.ces.org.tw/course/CT202d", time: "※【同步視訊課程】林口靈糧堂，週二晚上7:00-9:25(9/16-12/2)12週次", teacher: "廖元威", teacherUrl: "https://tee.ces.org.tw/course/teacher/CT202d", category: "神學類" },
            { serial: "010", name: "舊約特殊文體與釋經講道（進階課程）", nameUrl: "https://tee.ces.org.tw/course/PA247", time: "※【同步視訊課程】南京東路禮拜堂新安中心教室，週二晚上7:00-9:35(9/30-12/9)11週次", teacher: "黃正人", teacherUrl: "https://tee.ces.org.tw/course/teacher/PA247", category: "教牧類" },
            { serial: "011", name: "摩西五經導讀", nameUrl: "https://tee.ces.org.tw/course/OT213a", time: "※【全視訊課程】週三下午2:00-4:25(9/17-12/3)12週次", teacher: "賴建國", teacherUrl: "https://tee.ces.org.tw/course/teacher/OT213a", category: "舊約類" },
            { serial: "012", name: "大小先知書導讀", nameUrl: "https://tee.ces.org.tw/course/OT205f", time: "※【全視訊課程】週三晚上7:00-9:25(9/17-10/3)12週次", teacher: "黃立仁", teacherUrl: "https://tee.ces.org.tw/course/teacher/OT205f", category: "舊約類" },
            { serial: "013", name: "青少年牧養理念與門徒培育", nameUrl: "https://tee.ces.org.tw/course/PA351", time: "※【全視訊課程】週三晚上7:00-9:35(9/17-11/26)11週次", teacher: "蘇俊宗", teacherUrl: "https://tee.ces.org.tw/course/teacher/PA351", category: "教牧類" },
            { serial: "014", name: "全民希臘文(進階)：登山寶訓", nameUrl: "https://tee.ces.org.tw/course/LA157", time: "※【全視訊課程】週三晚上7:00-9:25(9/17-12/3)12週次", teacher: "張奇軍", teacherUrl: "https://tee.ces.org.tw/course/teacher/LA157", category: "語文類" },
            { serial: "015", name: "婚前教育與婚後重建", nameUrl: "https://tee.ces.org.tw/course/PC826a", time: "※【全視訊課程】週四上午9:00-11:25(9/18-12/4)(12週次)", teacher: "周玖玫", teacherUrl: "https://tee.ces.org.tw/course/teacher/PC826a", category: "輔導類" },
            { serial: "016", name: "釋經學入門：從文本到意義", nameUrl: "https://tee.ces.org.tw/course/BH137", time: "※【同步視訊課程】景美禮拜堂教室，週四晚上7:00-9:10(9/18-12/11)13週次", teacher: "張長暉", teacherUrl: "https://tee.ces.org.tw/course/teacher/BH137", category: "釋經類" },
            { serial: "017", name: "舊約歷史書導讀", nameUrl: "https://tee.ces.org.tw/course/OT216h", time: "※【同步視訊課程】台北榮耀堂教室，週四晚上7:00-9:25(9/18-12/4)12週次", teacher: "左大萱", teacherUrl: "https://tee.ces.org.tw/course/teacher/OT216h", category: "舊約類" },
            { serial: "018", name: "敬拜禮儀的理論與實務", nameUrl: "https://tee.ces.org.tw/course/PA248", time: "※【同步視訊課程】康華禮拜堂，週四晚上7:00-9:35(9/18-12/11)12週次", teacher: "馬振龍", teacherUrl: "https://tee.ces.org.tw/course/teacher/PA248", category: "教牧類" },
            { serial: "019", name: "基督教神學(上)", nameUrl: "https://tee.ces.org.tw/course/CT201a", time: "※【全視訊課程】週五晚上7:00-9:25(9/19-12/19)12週次", teacher: "史弘揚", teacherUrl: "https://tee.ces.org.tw/course/teacher/CT201a", category: "神學類" },
            { serial: "020", name: "以心理衛生與精神健康為基礎的牧靈工作", nameUrl: "https://tee.ces.org.tw/course/PC629", time: "※【同步視訊課程】康華禮拜堂，週五晚上7:00-9:25(9/19-12/19)12週次", teacher: "王仁邦", teacherUrl: "https://tee.ces.org.tw/course/teacher/PC629", category: "輔導類" },
            { serial: "021", name: "宣教中國議題", nameUrl: "https://tee.ces.org.tw/course/EM290", time: "※海外合作課程（限合作單位同學選讀）  上課日期：114/9/1、9/8、9/15、9/22、9/29、10/13、10/20、10/27、11/3、11/10", teacher: "李約瑟", teacherUrl: "https://tee.ces.org.tw/course/teacher/EM290", category: "宣教類" },
            { serial: "022", name: "福音書導讀", nameUrl: "https://tee.ces.org.tw/course/NT224h", time: "※外區合作課程（限合作單位同學選讀） 上課日期：114/9/16～12/2", teacher: "陳美如", teacherUrl: "https://tee.ces.org.tw/course/teacher/NT224h", category: "新約類" },
            { serial: "023", name: "生命倫理與實務", nameUrl: "https://tee.ces.org.tw/course/CT407a", time: "※海外合作課程（限合作單位同學選讀）  上課日期：114/7/5～6、8/16～17、9/6～7", teacher: "郭英調", teacherUrl: "https://tee.ces.org.tw/course/teacher/CT407a", category: "神學類" },
            { serial: "024", name: "基督教神學(下)", nameUrl: "https://tee.ces.org.tw/course/CT202h", time: "※海外合作課程（限合作單位同學選讀） 上課日期：114/9/6、10/4、11/1、12/6、2026/1/3", teacher: "施永昌", teacherUrl: "https://tee.ces.org.tw/course/teacher/CT202h", category: "神學類" },
            { serial: "025", name: "詩歌智慧書導讀", nameUrl: "https://tee.ces.org.tw/course/OT206k", time: "※海外合作課程（限合作單位同學選讀）  上課日期：114/11/8、12/20、1/10、2/14、3/14", teacher: "林智偉", teacherUrl: "https://tee.ces.org.tw/course/teacher/OT206k", category: "舊約類" },
            { serial: "026", name: "宣教與文化", nameUrl: "https://tee.ces.org.tw/course/EM261a", time: "※海外合作課程（限合作單位同學選讀） 上課日期：114/10/25、11/22、12/27、115/1/24、2/28", teacher: "金克宜", teacherUrl: "https://tee.ces.org.tw/course/teacher/EM261a", category: "宣教類" },
            { serial: "027", name: "啟示錄", nameUrl: "https://tee.ces.org.tw/course/NT118", time: "※海外合作課程（限合作單位同學選讀）  上課日期：114/7/9、7/10、7/11、7/16、7/17、7/18、7/23～26", teacher: "吳獻章", teacherUrl: "https://tee.ces.org.tw/course/teacher/NT118", category: "新約類" },
            { serial: "028", name: "醫治釋放禱告的神學與實務", nameUrl: "https://tee.ces.org.tw/course/PA122b", time: "※海外合作課程（限合作單位同學選讀）  上課日期：8/1～8/9全實體上課（無線上）", teacher: "陳志宏", teacherUrl: "https://tee.ces.org.tw/course/teacher/PA122b", category: "教牧類" },
            { serial: "029", name: "教會歷史（一）", nameUrl: "https://tee.ces.org.tw/course/CH125", time: "※海外合作課程（限合作單位同學選讀）  上課日期：114/8/21、9/4、9/11、8/26～31", teacher: "周學信", teacherUrl: "https://tee.ces.org.tw/course/teacher/CH125", category: "歷史類" },
            { serial: "030", name: "講道學", nameUrl: "https://tee.ces.org.tw/course/PA208a", time: "※海外合作課程（限合作單位同學選讀） 上課日期：114/9/16、9/23、10/7、10/14、10/21、10/2、11/4、11/11", teacher: "戴繼宗", teacherUrl: "https://tee.ces.org.tw/course/teacher/PA208a", category: "教牧類" },
            { serial: "031", name: "福音神學（下）", nameUrl: "https://tee.ces.org.tw/course/CT265", time: "※海外合作課程（限合作單位同學選讀） 上課日期：114/10/5、10/12、10/19、10/26、11/2、11/9", teacher: "傅立德", teacherUrl: "https://tee.ces.org.tw/course/teacher/CT265", category: "神學類" },
            { serial: "032", name: "摩西五經(上)【多媒體聖經】", nameUrl: "https://tee.ces.org.tw/course/OT229", time: "網上上課，90天內完成課程", teacher: "賴建國<br>黃彩雲", teacherUrl: "https://tee.ces.org.tw/course/teacher/OT229", category: "舊約類" },
            { serial: "033", name: "大先知書【多媒體聖經】", nameUrl: "https://tee.ces.org.tw/course/OT232", time: "網上上課，90天內完成課程", teacher: "吳獻章<br>邱琳雅", teacherUrl: "https://tee.ces.org.tw/course/teacher/OT232", category: "舊約類" },
            { serial: "034", name: "詩歌智慧書【多媒體聖經】", nameUrl: "https://tee.ces.org.tw/course/OT234", time: "網上上課，90天內完成課程", teacher: "吳獻章<br>邱琳雅", teacherUrl: "https://tee.ces.org.tw/course/teacher/OT234", category: "舊約類" },
            { serial: "035", name: "保羅書信(中)【多媒體聖經】", nameUrl: "https://tee.ces.org.tw/course/NT247", time: "網上上課，90天內完成課程", teacher: "蔡筱楓", teacherUrl: "https://tee.ces.org.tw/course/teacher/NT247", category: "新約類" }
        ];

        // 解析 URL 參數
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                q: params.get('q') || '',
                cat: params.get('cat') || '',
                mode: params.get('mode') || ''
            };
        }

        // 更新 URL 參數（不重整頁面）
        function updateUrl(search = '', category = '', mode = '') {
            const url = new URL(window.location);
            ['q', 'cat', 'mode'].forEach(key => url.searchParams.delete(key));
            if (search) url.searchParams.set('q', search);
            if (category) url.searchParams.set('cat', category);
            if (mode) url.searchParams.set('mode', mode);
            window.history.replaceState({}, '', url);
        }

        function populateCategories() {
            const categories = [...new Set(courses.map(c => c.category))];
            const select = document.getElementById('categorySelect');
            categories.forEach(cat => {
                const option = document.createElement('option');
                option.value = cat;
                option.textContent = cat;
                select.appendChild(option);
            });
        }

        function renderCourses(filteredCourses) {
            const tbody = document.getElementById('coursesBody');
            tbody.innerHTML = '';
            if (filteredCourses.length === 0) {
                document.getElementById('no-results').style.display = 'block';
            } else {
                document.getElementById('no-results').style.display = 'none';
                filteredCourses.forEach(course => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${course.serial}</td>
                        <td><a href="${course.nameUrl}" target="_blank">${course.name}</a></td>
                        <td>${course.time}</td>
                        <td><a href="${course.teacherUrl}" target="_blank">${course.teacher}</a></td>
                        <td>${course.category}</td>
                    `;
                    tbody.appendChild(tr);
                });
            }
        }

        function filterCourses() {
            const search = document.getElementById('searchInput').value.trim().toLowerCase();
            const category = document.getElementById('categorySelect').value;
            const mode = document.getElementById('modeSelect').value;
            const timeText = course => course.time;

            const filtered = courses.filter(course => {
                // 搜尋條件
                const matchesSearch = !search || 
                    course.name.toLowerCase().includes(search) || 
                    course.teacher.toLowerCase().includes(search);

                // 類別條件
                const matchesCategory = !category || course.category === category;

                // 課程形式條件
                let matchesMode = true;
                if (mode === 'video') {
                    matchesMode = timeText(course).includes('全視訊課程') || timeText(course).includes('同步視訊課程');
                } else if (mode === 'physical') {
                    matchesMode = timeText(course).includes('實體課程') || timeText(course).includes('同步視訊課程');
                }

                return matchesSearch && matchesCategory && matchesMode;
            });

            renderCourses(filtered);
            updateUrl(search, category, mode);
        }

        // 初始化：從 URL 載入預設值
        function initFiltersFromUrl() {
            const { q, cat, mode } = getUrlParams();

            if (q) document.getElementById('searchInput').value = decodeURIComponent(q);
            if (cat) document.getElementById('categorySelect').value = decodeURIComponent(cat);
            if (mode) document.getElementById('modeSelect').value = mode;

            setTimeout(filterCourses, 0);
        }

        // 重置按鈕
        document.getElementById('resetBtn').addEventListener('click', () => {
            document.getElementById('searchInput').value = '';
            document.getElementById('categorySelect').value = '';
            document.getElementById('modeSelect').value = '';
            updateUrl();
            renderCourses(courses);
        });

        // 事件監聽
        document.getElementById('searchInput').addEventListener('input', filterCourses);
        document.getElementById('categorySelect').addEventListener('change', filterCourses);
        document.getElementById('modeSelect').addEventListener('change', filterCourses);

        // 啟動
        populateCategories();
        initFiltersFromUrl();
    </script>
</body>
</html>